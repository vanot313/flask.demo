# 算法文档

## 1.1 总体流程

本模型的构建流程分为如下5个过程：

1. 数据收集

   ​		样本数据是模型构建的基础，为了构建准确的数据资产的估值模型，通过系统使用户能够快速、合理地获得数据资产的估值建议，需要大量的、多维度的数据。

   ​		为满足模型对于数据量和维度要求，可以通过网络爬虫，收集例如京东万象、百度智能云云市场、聚合数据等数据交易网站中数据资产商品相关的信息，提取出其中的关键数据，包括但不限于数据名称、数据类型、交易量、 交易价格、评分等信息。基础数据包含数据名称、数据类型、数据标签、数据大小、数据类型、数据格式、时间范围、数据数量、评价、交易量、浏览量等。

   ​		亦可通过其他途径，获得健康的数据资产交易的数据集。

2. 数据预处理

   ​		通过上述过程收集的数据具有多样性、非结构性，如果不经过预处理，一般无法为模型所用。所以需要对数据进行数据清洗、数据归一化、数据加载等过程。

   - 数据清洗

     ​		通常，原始数据中存在重复、无效、错误、不一致或不完整的数据，所以需要进行数据清洗的操作。对于数据中重复、无效的字段、元组，要删除重复的部分；对于数据中错误和不一致的部分，要加以修正；对于数据中不完整的部分，要根据实际情况进行填充、删除、转化等操作；对于数据中非结构化的字段，要通过一定的映射方法转化为结构化数据。

   - 数据归一化

     ​		这个过程是通过某种标准化映射函数，将值域不定、维度差距很大的原始数据转化为无量纲数据的过程，使其符合模型激活函数的值域范围，有利于提高模型的训练速度、收敛效率以及精确度。

   - 数据加载

     ​		将数据根据模型的训练、预测需求，转化为矩阵的形态，从本地或数据库中加载到模型中。

3. 卷积神经网络模型构建

   ​		本模型选择使用卷积神经网络。卷积神经网络与普通的神经网络相似，由具有可学习的权重和偏置常量的神经元组成，每个神经元接收一些输入，做点积运算并输出。在构建一个卷积神经网络模型时，需要考虑以下方面：

   - 层、节点

     卷积神经网络包括以下几种层：

     - **卷积层（Convolutional layer）**
       卷积神经网路中每层卷积层由若干卷积单元组成，每个卷积单元的参数都是通过反向传播算法优化得到的。卷积运算的目的是提取输入的不同特征，第一层卷积层可能只能提取一些低级的特征如边缘、线条和角等层级，更多层的网络能从低级特征中迭代提取更复杂的特征。
     - **池化层（Pooling layer）**
       通常在卷积层之后会得到维度很大的特征，将特征切成几个区域，取其最大值或平均值，得到新的、维度较小的特征。
     - **全连接层（ Fully-Connected layer）**
       把所有局部特征结合变成全局特征，用来计算最后每一类的得分。

     本模型层数的由数据的特征维度来确定，初始节点数由输入维度确定 ，而中间层的节点数由上一层的输出确定 ，输出层的节点数由输出目标维度确定。根据最终模型的实际训练情况，再对模型的层数、节点数进行进一步的验证和修改。

   - 激活函数

     激活函数使深度学习的模型具有非线性的建模能力，在本项目中的选择需要经过测试后确定。

   - 损失函数

     损失函数用于计算训练的输出值和实际目标值之间的偏差，可以评估模型的优劣并以此为依据为优化模型提供建议。

4. 模型的训练及优化

   ​		在模型训练之前需要确定优化函数，优化函数用于保证模型快速、准确地收敛。在模型对训练集数据分批进行训练，通过前向传播对模型进行修改后，模型的数据资产的估值能力、准确度将得到提升，直至获得最终期望获得的模型。

5. 模型的评估

   ​		在数据资产的估值模型构建并完成训练过程后，就可以投入生产环境中测试实际效果。针对验证的结果，可以对上述过程进行分析调整，进一步优化模型。

## 1.2 数据收集

对于数据资产的估值，需要根据实际需要评估的对象来分析影响数据资产价值的因素，确定数据资产的特征。

在本项目中数据资产的优劣。数据资产的价值从五个维度来评估，分别是规模度、活性度、多维度、关联性、颗粒度。

- 规模度

  ​		数据的规模度体现在数据的数据集的大小。一般来说，一个数据集越大，所包含的数据越多，富集的信息也就越多，具有越高的价值。量变引起质变，随着数据的规模增加，许多隐藏的具有价值的信息也浮出水面。但是数据集的价值和纵向规模之间的关系并不是线性的，当数据集大到一定程度时，数据集的规模再增加，由于边际效应，数据的价值可能不会发生变化甚至减少。

- 活性度

  ​		数据的活性度体现在数据的时效性。和其他资产价值的评估类似，数据资产的价值也会随着时间的推移而降低；反之，数据被更新的频率越高，更迭的速度越快，数据本身的价值越高。对于一些数据，如股票、网络应用的用户数据等，对于数据的活性度要求非常高，活性度对于此类数据的价值的影响也会非常大。

- 多维度

  ​		数据的多维度体现在数据集字段的数量。数据的维度越高，单条数据本身富含的信息越多，并且信息和信息之间的联系也会更加明晰，是数据体现关联性的基础，因此数据的价值也就越高。

- 关联度

  ​		数据的关联度体现在数据自身不同多维数据之间的内在联系以及和其他数据之间的联系程度。人类的联系性、世界的全球性、事物的关联性决定了具有价值的数据都是存在一定的关联性的，而不同数据维度、不同数据之间存在的联系也是数据自身的信息的一部分，是数据价值体现。

- 颗粒度

  ​		数据的颗粒度反映数据的精细化程度，体现了数据的质量。比如，如果了解了一个国家中每一个人的生活情况，就能依次了解到整个国家人民的生活水平；但是若只知道整个国家人民的生活水平，却不能获得该国某一个人生活情况。一般来说，数据的颗粒度越细，越能够发现数据存在的规律，富集了更多的信息。		

根据第十二届中国大学生服务外包创新创业大赛企业命题类赛题手册，采用市场法方式的数据资产估值定价分析的训练数据和测试数据可以在京东万象进行收集。但是实际通过爬虫获得的数据维度极少，不满足模型训练的要求，故本项目采用Kaggle的New York Stock Exchange S&P 500 companies historical prices with fundamental data数据进行模型的训练。经过实验，该数据和数据资产估值模型所需的数据具有很高的相似性，能够很好地体现数据资产的特性，同时具有较大的数据量，丰富的数据维度，能够满足训练的要求。

通过模拟的方式可以得到数据资产数据集的维度（见下表），其根据自身的特性分别对应数据维度特征的规模度、活性度、多维度、关联度和颗粒度。

| 数据维度特征 |                     数据资产数据集的维度                     |
| :----------: | :----------------------------------------------------------: |
|    规模度    | 数据量、数据使用范围、数据大小、数据增长速度、数据获取难易程度、数据独占程度 |
|    活性度    | 数据更新频率、数据访问频率、数据存在时间、数据更新差异大小、访问系统数量、常用属性数量、累积访问次数、累积更新次数 |
|    多维度    | 数据来源种类、数据来源数量、数据来源方式、数据来源类型、数据覆盖范围、数据重复率、数据一致性、数据采集方式 |
|    关联度    | 流入数据数量、流出数据数量、流入数据频率、流出数据频率、流入数据大小、流出数据大小、流入数据关联强度、流出数据关联强度、数据依赖程度、数据独立程度 |
|    颗粒度    | 数据属性数量、数据属性类型、数据属性精度、数据属性准确性、数据属性长度、数据属性完整性、数据属性合规性、维护频率、数据属性格式、编码方式、标准、命名规则 |

## 1.3 数据预处理

- 数据清洗

  ​		在本项目使用的数据集中，存在无效的字段以及不完整的数据，需要进行数据清洗的操作。

  ​		对于数据中无效的字段，进行删除操作；对于数据中不完整的部分，要根据实际情况进行填充、删除、转化等操作。

- 数据归一化

  ​		这个过程是通过某种标准化映射函数，将值域不定、维度差距很大的原始数据转化为无量纲数据的过程，使其符合模型激活函数的值域范围，有利于提高模型的训练速度、收敛效率以及精确度。

  ​		在本项目中，数据的特点为数据存在0和负值，且大部分数据为比较大的正整数。根据这些特性，采用的数据归一化方式为Min-Max法。Min-Max法的映射函数如下：
  $$
  x'=\frac{x-x_{min}}{x_{max}-x_{min}}
  $$
  

  ​		其中，x是初始值，$x_{max}$为数据集同一字段中最大的值，$x_{min}$为数据集同一字段中最小的值。通过Min-Max法可以将初始的数据映射到[0,1]的区间内，同时能够保留原本数据相对于数据集线性的大小关系，适用于本项目的环境。

- 数据加载

  ​		根据本项目模型的训练、预测需求，将数据的每一行（即每一个数据集的信息）根据规模度、活性度、多维度、关联度、颗粒度的特征分类，再转化为5*25的矩阵的形态，每一个1\*25的矩阵都存储对应特征的维度信息，并以npy数据文件的格式，以数据本身的索引命名保存。在模型的训练、预测过程中需要数据文件时，将调用事先好的数据读写代码，分批次加载读入到模型中。

## 1.4 卷积神经网络模型构建

- 模型层数
- 节点数
- 激活函数
- 损失函数

## 1.5 模型的训练及优化

## 1.6 模型的评估